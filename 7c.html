<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Access 4 - Module 7c: Cellphones</title>
    <style>
        :root {
            --primary: #2980b9; 
            --primary-dark: #1c5982; 
            --success: #27ae60;
            --error: #e74c3c; 
            --warning: #f1c40f; 
            --bg: #f4f7f9;
            --text: #2c3e50; 
            --card: #ffffff;
            --light-blue: #e3f2fd;
            --light-green: #e8f5e9;
            --light-yellow: #fff8e1;
            --light-red: #ffebee;
            --intro-color: #e8f6f3;
            --body-color: #fef5e7;
            --conclusion-color: #fdedec;
            --highlight-yellow: #fffacd;
            --highlight-blue: #e0f2fe;
            --highlight-green: #e0f2e0;
        }
        
        body { 
            font-family: 'Times New Roman', serif; 
            font-size: 13pt; 
            background-color: var(--bg); 
            color: var(--text); 
            margin: 0; 
            padding: 20px 20px 100px 20px; 
            line-height: 1.6; 
        }
        
        .container { 
            max-width: 1000px; 
            margin: 0 auto; 
        }
        
        .main-title { 
            text-align: center; 
            color: var(--primary-dark); 
            margin-bottom: 30px; 
            font-size: 1.8em;
        }
        
        .collapsible-section {
            background: var(--card); 
            border-radius: 12px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); 
            padding: 0; 
            margin-bottom: 15px;
            overflow: hidden;
        }
        
        .section-header {
            font-weight: bold; 
            font-size: 1.25em; 
            padding: 20px 25px;
            color: var(--primary-dark);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .section-header:hover {
            opacity: 0.9;
        }
        
        .section-header.active {
            border-bottom: 2px solid var(--primary);
        }
        
        .toggle-icon {
            font-size: 1.2em;
            transition: transform 0.3s ease;
        }
        
        .section-header.active .toggle-icon {
            transform: rotate(90deg);
        }
        
        .section-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.5s ease;
        }
        
        .section-content.active {
            padding: 25px;
            max-height: 5000px;
        }
        
        /* CẤU TRÚC BÀI LUẬN styling */
        .essay-structure-section {
            background-color: var(--card);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border-top: 4px solid var(--primary);
        }
        
        .structure-title {
            text-align: center;
            font-weight: bold;
            font-size: 1.4em;
            color: var(--primary-dark);
            margin-bottom: 5px;
        }
        
        .structure-subtitle {
            text-align: center;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 25px;
            font-size: 1.1em;
        }
        
        /* Component grid for essay structure */
        .component-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-top: 10px;
        }
        
        .component-title {
            font-weight: bold;
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            color: var(--primary-dark);
        }
        
        .component-content {
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border: 1px solid #eee;
        }
        
        .function-list {
            margin: 0;
            padding-left: 20px;
        }
        
        .function-list li {
            margin-bottom: 8px;
            line-height: 1.5;
        }
        
        .highlight-box {
            background-color: #fef9e7;
            border-left: 4px solid var(--warning);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .example-box {
            background-color: #e8f4f8;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
            font-size: 0.9em;
        }
        
        .example-title {
            font-weight: bold;
            color: #1c5982;
            margin-bottom: 5px;
        }
        
        /* Vocabulary table styling */
        .vocab-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        .vocab-table th {
            background-color: var(--light-blue);
            padding: 12px;
            text-align: left;
            border: 1px solid #b3e5fc;
            font-weight: bold;
        }
        
        .vocab-table td {
            padding: 12px;
            border: 1px solid #e1f5fe;
        }
        
        .vocab-table tr:nth-child(even) {
            background-color: #f8fdff;
        }
        
        /* Idea bank styling */
        .idea-bank {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .idea-column {
            padding: 15px;
            border-radius: 8px;
        }
        
        .problems-column {
            background-color: var(--light-red);
            border-left: 4px solid #e74c3c;
        }
        
        .solutions-column {
            background-color: var(--light-green);
            border-left: 4px solid #27ae60;
        }
        
        .idea-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 15px;
            color: var(--primary-dark);
        }
        
        .idea-list {
            margin: 0;
            padding-left: 20px;
        }
        
        .idea-list li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        /* Sentence structures styling */
        .structures-section {
            background-color: var(--light-yellow);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid var(--warning);
        }
        
        .structures-title, .linking-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-dark);
        }
        
        .structure-item {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        
        .structure-item:before {
            content: "•";
            color: var(--primary);
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        
        /* Sample essay styling */
        .sample-essay {
            background-color: #f9f9f9;
            padding: 25px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            margin: 20px 0;
            line-height: 1.8;
        }
        
        .essay-title {
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary-dark);
            font-size: 1.2em;
        }
        
        .essay-paragraph {
            margin-bottom: 20px;
            text-align: justify;
            position: relative;
        }
        
        /* Highlight classes */
        .hl-topic {
            background-color: #fffacd;
            cursor: pointer;
            border-radius: 3px;
            padding: 2px 0;
        }
        
        .hl-supporting {
            background-color: #e0f2fe;
            cursor: pointer;
            border-radius: 3px;
            padding: 2px 0;
        }
        
        .hl-example {
            background-color: #e0f2e0;
            cursor: pointer;
            border-radius: 3px;
            padding: 2px 0;
        }
        
        .hl-topic:hover, .hl-supporting:hover, .hl-example:hover {
            opacity: 0.8;
        }
        
        /* Context menu styling */
        .context-menu {
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            padding: 8px 0;
            z-index: 1000;
            min-width: 200px;
            display: none;
        }
        
        .context-menu-item {
            padding: 10px 20px;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .context-menu-item:hover {
            background-color: #f0f0f0;
        }
        
        .context-menu-item.topic {
            border-left: 4px solid #f1c40f;
        }
        
        .context-menu-item.supporting {
            border-left: 4px solid #3498db;
        }
        
        .context-menu-item.example {
            border-left: 4px solid #27ae60;
        }
        
        .context-menu-item.reset {
            border-left: 4px solid #95a5a6;
        }
        
        .context-menu-item.reset-all {
            border-left: 4px solid #e74c3c;
        }
        
        .context-menu-divider {
            height: 1px;
            background-color: #eee;
            margin: 8px 0;
        }
        
        .color-dot {
            width: 16px;
            height: 16px;
            border-radius: 4px;
            display: inline-block;
        }
        
        .dot-topic {
            background-color: #fffacd;
            border: 1px solid #f1c40f;
        }
        
        .dot-supporting {
            background-color: #e0f2fe;
            border: 1px solid #3498db;
        }
        
        .dot-example {
            background-color: #e0f2e0;
            border: 1px solid #27ae60;
        }
        
        /* Outline styling */
        .outline-section {
            background-color: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        .outline-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-dark);
        }
        
        .outline-part {
            margin-bottom: 25px;
        }
        
        .outline-part-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .outline-input {
            background-color: white;
            border: 1px dashed #3498db;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 4px;
            min-height: 24px;
            display: inline-block;
            min-width: 200px;
        }
        
        .outline-input:focus {
            outline: 1px solid var(--primary);
            border: 1px solid var(--primary);
        }
        
        /* Exercise styling */
        .exercise-section {
            background-color: #fff8e1;
            padding: 25px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #ffa000;
        }
        
        .exercise-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #e65100;
            font-size: 1.1em;
        }
        
        .exercise-instruction {
            margin-bottom: 15px;
            font-style: italic;
            color: #5d4037;
        }
        
        hr {
            border: none;
            height: 1px;
            background-color: #e0e0e0;
            margin: 30px 0;
        }
        
        .note-box {
            background-color: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #4caf50;
            font-style: italic;
        }
        
        /* Color coding for essay structure sections */
        .intro-header {
            background-color: var(--intro-color);
            border-left: 5px solid #1abc9c;
        }
        
        .body-header {
            background-color: var(--body-color);
            border-left: 5px solid #f39c12;
        }
        
        .conclusion-header {
            background-color: var(--conclusion-color);
            border-left: 5px solid #e74c3c;
        }
        
        .intro-content {
            border-left: 5px solid #1abc9c;
        }
        
        .body-content {
            border-left: 5px solid #f39c12;
        }
        
        .conclusion-content {
            border-left: 5px solid #e74c3c;
        }

        /* Split view for sections V and VI */
        .split-view-container {
            display: flex;
            flex-direction: column;
            margin-bottom: 15px;
        }

        .split-view-header {
            background: var(--card);
            border-radius: 12px 12px 0 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            padding: 0;
            overflow: hidden;
        }

        .split-view-content {
            display: flex;
            height: 600px;
            border-radius: 0 0 12px 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            position: relative;
        }

        .split-panel {
            flex: 1;
            overflow-y: auto;
            background: var(--card);
            position: relative;
            min-width: 200px;
            transition: none;
        }

        .split-panel:first-child {
            border-right: 1px solid #e0e0e0;
        }

        .split-panel-content {
            padding: 25px;
            height: 100%;
            box-sizing: border-box;
            overflow-y: auto;
        }

        /* Divider styling */
        .split-divider {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 12px;
            background: transparent;
            cursor: col-resize;
            z-index: 100;
            left: 50%;
            transform: translateX(-50%);
            transition: background-color 0.2s;
        }

        .split-divider:hover,
        .split-divider.resizing {
            background-color: rgba(41, 128, 185, 0.2);
        }

        .split-divider::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 4px;
            right: 4px;
            height: 60px;
            transform: translateY(-50%);
            background-color: var(--primary);
            border-radius: 3px;
            opacity: 0.6;
            transition: all 0.2s;
        }

        .split-divider:hover::before,
        .split-divider.resizing::before {
            opacity: 1;
            background-color: var(--primary-dark);
            left: 3px;
            right: 3px;
            height: 70px;
        }
        
        body.resizing {
            cursor: col-resize !important;
            user-select: none;
        }
        
        body.resizing * {
            cursor: col-resize !important;
        }
    </style>
</head>
<body>

<div class="container">
    <h1 class="main-title">Access 4 - Module 7c: Advantages & Disadvantages of Cellphones</h1>
    
    <!-- Phần CẤU TRÚC BÀI LUẬN -->
    <div class="essay-structure-section">
        <div class="structure-title">CẤU TRÚC BÀI LUẬN</div>
        <div class="structure-subtitle">CHỨC NĂNG CỦA TỪNG THÀNH PHẦN</div>
        
        <!-- I. INTRODUCTION -->
        <div class="collapsible-section intro-content" style="margin-top: 25px;">
            <div class="section-header intro-header" onclick="toggleSection('intro')">
                <span>I. INTRODUCTION (Mở bài)</span>
                <span class="toggle-icon">▶</span>
            </div>
            <div class="section-content" id="intro-content">
                <div class="component-grid">
                    <div class="component-title">1. Câu mở bài<br>(General Statement)</div>
                    <div class="component-content">
                        <ul class="function-list">
                            <li><strong>Giới thiệu bối cảnh:</strong> Giúp người đọc hiểu được chủ đề tổng quát và bối cảnh của vấn đề sẽ được thảo luận.</li>
                            <li><strong>Xác định vấn đề:</strong> Đề cập ngắn gọn đến thực trạng, tranh luận hoặc ý kiến liên quan, tạo nền tảng cho luận điểm chính.</li>
                        </ul>
                        
                        <div class="example-box">
                            <div class="example-title">Ví dụ:</div>
                            <p>"Cellphones have become an important part of modern life. People use them for communication, study, and entertainment."</p>
                        </div>
                    </div>
                </div>
                
                <div class="component-grid" style="margin-top: 20px;">
                    <div class="component-title">2. Luận điểm chính<br>(Thesis Statement)</div>
                    <div class="component-content">
                        <ul class="function-list">
                            <li><strong>Xác định quan điểm cá nhân:</strong> Thể hiện rõ lập trường của người viết về vấn đề.</li>
                            <li><strong>Định hướng nội dung bài viết:</strong> Cung cấp "bản đồ" cho toàn bài, chỉ ra các ý chính sẽ được triển khai trong phần thân bài.</li>
                            <li><strong>Tạo sự tập trung:</strong> Giúp người viết giữ mạch luận điểm thống nhất, không lan man hoặc lạc đề.</li>
                        </ul>
                        
                        <div class="example-box">
                            <div class="example-title">Ví dụ:</div>
                            <p>"Although cellphones bring many advantages, they also have some disadvantages."</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- II. BODY -->
        <div class="collapsible-section body-content" style="margin-top: 15px;">
            <div class="section-header body-header" onclick="toggleSection('body')">
                <span>II. BODY (Thân bài)</span>
                <span class="toggle-icon">▶</span>
            </div>
            <div class="section-content" id="body-content">
                <div class="component-grid">
                    <div class="component-title">3. Topic Sentences<br>(Câu chủ đề của từng đoạn)</div>
                    <div class="component-content">
                        <ul class="function-list">
                            <li><strong>Xác định nội dung chính của đoạn:</strong> Topic sentence giới thiệu đại ý mà đoạn văn sẽ triển khai.</li>
                            <li><strong>Liên kết với thesis:</strong> Câu chủ đề phải kết nối trực tiếp với thesis để đảm bảo mỗi đoạn góp phần chứng minh quan điểm chung.</li>
                            <li><strong>Tạo sự mạch lạc:</strong> Giúp người đọc nắm được hướng triển khai của đoạn trước khi đi vào chi tiết.</li>
                        </ul>
                        
                        <div class="example-box">
                            <div class="example-title">Ví dụ (cho đoạn Advantages):</div>
                            <p>"One major advantage of cellphones is that they make communication fast and convenient."</p>
                        </div>
                    </div>
                </div>
                
                <div class="component-grid" style="margin-top: 20px;">
                    <div class="component-title">4. Supporting Ideas<br>(Luận điểm hỗ trợ trong đoạn thân bài)</div>
                    <div class="component-content">
                        <ul class="function-list">
                            <li><strong>Trình bày ý chính rõ ràng:</strong> Mỗi supporting idea là một luận điểm phụ, làm cho đoạn văn có cấu trúc logic.</li>
                            <li><strong>Hỗ trợ cho thesis:</strong> Các ý phải liên quan chặt chẽ đến quan điểm chính đã nêu trong phần mở bài.</li>
                            <li><strong>Phân chia thông tin:</strong> Giúp chia nhỏ vấn đề thành từng khía cạnh để triển khai và giải thích sâu hơn.</li>
                        </ul>
                        
                        <div class="highlight-box">
                            <strong>Illustrate arguments using the following methods to make them persuasive and clear:</strong>
                            <ul>
                                <li><strong>Reason (nguyên nhân),</strong></li>
                                <li><strong>Result / Effect (kết quả / tác động),</strong></li>
                                <li><strong>Explanation (giải thích).</strong></li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <div class="example-title">Example of supporting idea with Explanation:</div>
                            <p>"Students can search for information online and use learning apps to support their studies."</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- III. CONCLUSION -->
        <div class="collapsible-section conclusion-content" style="margin-top: 15px;">
            <div class="section-header conclusion-header" onclick="toggleSection('conclusion')">
                <span>III. CONCLUSION (Kết bài)</span>
                <span class="toggle-icon">▶</span>
            </div>
            <div class="section-content" id="conclusion-content">
                <div class="component-grid">
                    <div class="component-title">5. Chức năng của Conclusion</div>
                    <div class="component-content">
                        <ul class="function-list">
                            <li><strong>Tóm tắt lại các luận điểm chính:</strong> Nhắc lại ý cốt lõi đã được trình bày trong các đoạn thân bài.</li>
                            <li><strong>Khẳng định lại quan điểm cá nhân:</strong> Một lần nữa làm rõ lập trường của người viết, đưa ra kết luận cuối về vấn đề.</li>
                        </ul>
                        
                        <div class="example-box">
                            <div class="example-title">Ví dụ:</div>
                            <p>"In conclusion, cellphones have both advantages and disadvantages. While they are very useful for communication and learning, they should be used responsibly to avoid negative effects."</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- I. Brainstorming Questions -->
    <div class="collapsible-section">
        <div class="section-header" onclick="toggleSection('brainstorming')">
            <span>I. Brainstorming Questions</span>
            <span class="toggle-icon">▶</span>
        </div>
        <div class="section-content" id="brainstorming-content">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 10px;">
                <div>
                    <h3 style="color: #27ae60; margin-bottom: 10px;">Advantages</h3>
                    <ul style="padding-left: 20px;">
                        <li>How does a cellphone help students?</li>
                        <li>Why is a cellphone useful in daily life?</li>
                    </ul>
                </div>
                <div>
                    <h3 style="color: #e74c3c; margin-bottom: 10px;">Disadvantages</h3>
                    <ul style="padding-left: 20px;">
                        <li>How can cellphones distract students?</li>
                        <li>What happens when people use phones too much?</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- II. Vocabulary -->
    <div class="collapsible-section">
        <div class="section-header" onclick="toggleSection('vocabulary')">
            <span>II. Vocabulary</span>
            <span class="toggle-icon">▶</span>
        </div>
        <div class="section-content" id="vocabulary-content">
            <table class="vocab-table">
                <thead>
                    <tr>
                        <th>Word / Phrase</th>
                        <th>Meaning</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>gadget, electronic device</td>
                        <td>thiết bị điện tử</td>
                    </tr>
                    <tr>
                        <td>communicate</td>
                        <td>giao tiếp</td>
                    </tr>
                    <tr>
                        <td>access information</td>
                        <td>tiếp cận thông tin</td>
                    </tr>
                    <tr>
                        <td>social media</td>
                        <td>mạng xã hội</td>
                    </tr>
                    <tr>
                        <td>distraction</td>
                        <td>sự xao nhãng</td>
                    </tr>
                    <tr>
                        <td>screen time</td>
                        <td>thời gian dùng màn hình</td>
                    </tr>
                    <tr>
                        <td>eye strain</td>
                        <td>mỏi mắt</td>
                    </tr>
                    <tr>
                        <td>sleep problems</td>
                        <td>vấn đề về giấc ngủ</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- III. Idea Bank -->
    <div class="collapsible-section">
        <div class="section-header" onclick="toggleSection('idea-bank')">
            <span>III. Idea Bank</span>
            <span class="toggle-icon">▶</span>
        </div>
        <div class="section-content" id="idea-bank-content">
            <div class="idea-bank">
                <div class="idea-column solutions-column">
                    <div class="idea-title">Body 1 – Advantages of Cellphones</div>
                    <ul class="idea-list">
                        <li>Fast communication → easy contact anytime</li>
                        <li>Easy access to information → support learning</li>
                        <li>Useful in emergencies → quick help</li>
                        <li>Online learning and apps → better study tools</li>
                    </ul>
                </div>
                
                <div class="idea-column problems-column">
                    <div class="idea-title">Body 2 – Disadvantages of Cellphones</div>
                    <ul class="idea-list">
                        <li>Too much screen time → distraction from study</li>
                        <li>Social media and games → waste time</li>
                        <li>Eye strain and headaches → health problems</li>
                        <li>Using phones at night → poor sleep</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- IV. Useful Sentence Structures & Linking Words -->
    <div class="collapsible-section">
        <div class="section-header" onclick="toggleSection('structures')">
            <span>IV. Useful Sentence Structures & Linking Words</span>
            <span class="toggle-icon">▶</span>
        </div>
        <div class="section-content" id="structures-content">
            <div class="structures-section">
                <div class="structures-title">Structures</div>
                <div class="structure-item">One major advantage is that + clause.</div>
                <div class="structure-item">Another advantage is + noun phrase.</div>
                <div class="structure-item">One main disadvantage is that + clause.</div>
                <div class="structure-item">Another disadvantage is + noun phrase.</div>
                
                <hr style="margin: 20px 0;">
                
                <div class="linking-title">Linking Words</div>
                <div class="structure-item">Firstly, Secondly,</div>
                <div class="structure-item">Moreover, In addition,</div>
                <div class="structure-item">For example, For instance,</div>
                <div class="structure-item">However, As a result,</div>
            </div>
        </div>
    </div>
    
    <!-- Phần V và VI - Split View với menu chuột phải -->
    <div class="split-view-container">
        <div class="split-view-header">
            <div class="section-header" onclick="toggleSplitView()">
                <span>V. Sample Essay & VI. Identify the Structure</span>
                <span class="toggle-icon" id="split-toggle-icon">▶</span>
            </div>
        </div>
        <div class="split-view-content" id="split-view-content" style="display: none; max-height: 0;">
            <div class="split-panel" id="left-panel">
                <div class="split-panel-content">
                    <div class="sample-essay" id="sample-essay">
                        <div class="essay-title">Advantages and Disadvantages of Cellphones</div>
                        
                        <div class="essay-paragraph" id="para1">
                            Cellphones have become an important part of modern life. People use them for communication, study, and entertainment. Although cellphones bring many advantages, they also have some disadvantages.
                        </div>
                        
                        <div class="essay-paragraph" id="para2">
                            One major advantage of cellphones is that they make communication fast and convenient. People can contact others anytime and anywhere by calling or sending messages. This is very useful in daily life and in emergencies. Another advantage is easy access to information. Students can search for information online and use learning apps to support their studies.
                        </div>
                        
                        <div class="essay-paragraph" id="para3">
                            However, cellphones also have several disadvantages. One main disadvantage is distraction. Many students spend too much time on social media or games, which affects their concentration at school. Another disadvantage is health problems. Using cellphones for a long time can cause eye strain and sleep problems, especially when people use their phones late at night.
                        </div>
                        
                        <div class="essay-paragraph" id="para4">
                            In conclusion, cellphones have both advantages and disadvantages. While they are very useful for communication and learning, they should be used responsibly to avoid negative effects.
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Divider -->
            <div class="split-divider" id="split-divider"></div>
            
            <div class="split-panel" id="right-panel">
                <div class="split-panel-content">
                    <div class="exercise-section">
                        <div class="exercise-title">VI. Identify the Structure</div>
                        <div class="exercise-instruction">(Gạch chân và ghi chú trực tiếp vào bài mẫu)</div>
                        
                        <ol style="padding-left: 20px;">
                            <li>Gạch chân <strong>topic sentence</strong> của mỗi body paragraph và ghi chú: <span style="background-color: #fffacd; padding: 2px 4px;">Topic sentence</span></li>
                            <li>Gạch chân <strong>supporting ideas</strong> và ghi chú: <span style="background-color: #e0f2fe; padding: 2px 4px;">Supporting idea 1 / 2</span></li>
                            <li>Gạch chân câu <strong>giải thích hoặc ví dụ</strong> và ghi chú: <span style="background-color: #e0f2e0; padding: 2px 4px;">Explanation / Example</span></li>
                        </ol>
                        
                        <div class="note-box">
                            <strong>Cách sử dụng:</strong> Bôi đen đoạn văn bất kỳ trong bài luận bên trái, nhấp chuột phải và chọn loại highlight mong muốn từ menu.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Context Menu -->
    <div class="context-menu" id="context-menu">
        <div class="context-menu-item topic" onclick="highlightSelection('topic')">
            <span class="color-dot dot-topic"></span>
            <span>Topic sentence</span>
        </div>
        <div class="context-menu-item supporting" onclick="highlightSelection('supporting')">
            <span class="color-dot dot-supporting"></span>
            <span>Supporting idea</span>
        </div>
        <div class="context-menu-item example" onclick="highlightSelection('example')">
            <span class="color-dot dot-example"></span>
            <span>Explanation / Example</span>
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item reset" onclick="removeHighlight()">
            <span> Delete this highlight</span>
        </div>
        <div class="context-menu-item reset-all" onclick="resetAllHighlights()">
            <span> Delete all highlight</span>
        </div>
    </div>
    
    <!-- VII. Outline Writing -->
    <div class="collapsible-section">
        <div class="section-header" onclick="toggleSection('outline')">
            <span>VII. Outline Writing</span>
            <span class="toggle-icon">▶</span>
        </div>
        <div class="section-content" id="outline-content">
            <div class="outline-section">
                <div class="outline-title">Essay Outline Template: Advantages & Disadvantages of Cellphones</div>
                
                <div class="outline-part">
                    <div class="outline-part-title">Introduction</div>
                    <div>• General statement: <span class="outline-input" contenteditable="true"></span></div>
                    <div>• Thesis statement: <span class="outline-input" contenteditable="true"></span></div>
                </div>
                
                <div class="outline-part">
                    <div class="outline-part-title">Body Paragraph 1 – Advantages:</div>
                    <div>• Supporting idea 1: <span class="outline-input" contenteditable="true"></span></div>
                    <div>• Explanation / Example: <span class="outline-input" contenteditable="true"></span></div>
                    <div>• Supporting idea 2: <span class="outline-input" contenteditable="true"></span></div>
                    <div>• Explanation / Example: <span class="outline-input" contenteditable="true"></span></div>
                </div>
                
                <div class="outline-part">
                    <div class="outline-part-title">Body Paragraph 2 – Disadvantages:</div>
                    <div>• Supporting idea 1: <span class="outline-input" contenteditable="true"></span></div>
                    <div>• Explanation / Example: <span class="outline-input" contenteditable="true"></span></div>
                    <div>• Supporting idea 2: <span class="outline-input" contenteditable="true"></span></div>
                    <div>• Explanation / Example: <span class="outline-input" contenteditable="true"></span></div>
                </div>
                
                <div class="outline-part">
                    <div class="outline-part-title">Conclusion</div>
                    <div>• Summary of main ideas: <span class="outline-input" contenteditable="true"></span></div>
                    <div>• Final opinion: <span class="outline-input" contenteditable="true"></span></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
let activeSection = null;
let isSplitViewActive = false;
let isResizing = false;
let leftPanelWidth = 50;
let splitContent = null;
let leftPanel = null;
let rightPanel = null;
let divider = null;
let lastSelection = null;

function toggleSection(sectionId) {
    const content = document.getElementById(`${sectionId}-content`);
    const header = content.previousElementSibling;
    
    if (activeSection === sectionId) {
        content.classList.remove('active');
        header.classList.remove('active');
        activeSection = null;
    } else {
        if (activeSection) {
            const prevContent = document.getElementById(`${activeSection}-content`);
            const prevHeader = prevContent.previousElementSibling;
            prevContent.classList.remove('active');
            prevHeader.classList.remove('active');
        }
        
        content.classList.add('active');
        header.classList.add('active');
        activeSection = sectionId;
    }
}

function toggleSplitView() {
    const toggleIcon = document.getElementById('split-toggle-icon');
    const splitHeader = document.querySelector('.split-view-header .section-header');
    
    if (!splitContent) {
        splitContent = document.getElementById('split-view-content');
        leftPanel = document.getElementById('left-panel');
        rightPanel = document.getElementById('right-panel');
        divider = document.getElementById('split-divider');
    }
    
    if (isSplitViewActive) {
        splitContent.style.display = 'none';
        splitContent.style.maxHeight = '0';
        toggleIcon.style.transform = 'rotate(0deg)';
        splitHeader.classList.remove('active');
    } else {
        splitContent.style.display = 'flex';
        splitContent.style.maxHeight = '600px';
        toggleIcon.style.transform = 'rotate(90deg)';
        splitHeader.classList.add('active');
        
        updatePanelSizes();
        updateDividerPosition();
    }
    
    isSplitViewActive = !isSplitViewActive;
}

function updatePanelSizes() {
    if (!leftPanel || !rightPanel) return;
    
    leftPanel.style.flex = `0 0 ${leftPanelWidth}%`;
    rightPanel.style.flex = `0 0 ${100 - leftPanelWidth}%`;
}

function updateDividerPosition() {
    if (!divider || !splitContent) return;
    
    const containerWidth = splitContent.offsetWidth;
    const dividerPosition = (containerWidth * leftPanelWidth / 100);
    
    divider.style.left = `${dividerPosition}px`;
}

function initResize(e) {
    e.preventDefault();
    isResizing = true;
    
    divider.classList.add('resizing');
    document.body.classList.add('resizing');
    
    document.addEventListener('mousemove', handleResize);
    document.addEventListener('mouseup', stopResize);
}

function handleResize(e) {
    if (!isResizing || !splitContent) return;
    
    const containerRect = splitContent.getBoundingClientRect();
    const containerWidth = containerRect.width;
    
    let mouseX = e.clientX - containerRect.left;
    mouseX = Math.max(20, Math.min(mouseX, containerWidth - 20));
    
    leftPanelWidth = (mouseX / containerWidth) * 100;
    
    updatePanelSizes();
    divider.style.left = `${mouseX}px`;
}

function stopResize() {
    if (!isResizing) return;
    
    isResizing = false;
    divider.classList.remove('resizing');
    document.body.classList.remove('resizing');
    
    document.removeEventListener('mousemove', handleResize);
    document.removeEventListener('mouseup', stopResize);
}

function handleWindowResize() {
    if (isSplitViewActive) {
        updateDividerPosition();
    }
}

// Context menu functions
document.addEventListener('selectionchange', function() {
    const selection = window.getSelection();
    if (selection.toString().length > 0) {
        lastSelection = selection.getRangeAt(0).cloneRange();
    }
});

document.addEventListener('contextmenu', function(e) {
    const selection = window.getSelection();
    if (selection.toString().length === 0) return;
    
    e.preventDefault();
    
    const menu = document.getElementById('context-menu');
    menu.style.display = 'block';
    menu.style.left = e.pageX + 'px';
    menu.style.top = e.pageY + 'px';
    
    lastSelection = selection.getRangeAt(0).cloneRange();
});

document.addEventListener('click', function() {
    document.getElementById('context-menu').style.display = 'none';
});

function highlightSelection(type) {
    if (!lastSelection) return;
    
    const range = lastSelection;
    const selectedText = range.toString();
    
    if (selectedText.length === 0) return;
    
    const span = document.createElement('span');
    
    if (type === 'topic') {
        span.className = 'hl-topic';
        span.title = 'Topic sentence';
    } else if (type === 'supporting') {
        span.className = 'hl-supporting';
        span.title = 'Supporting idea';
    } else if (type === 'example') {
        span.className = 'hl-example';
        span.title = 'Explanation / Example';
    }
    
    span.appendChild(document.createTextNode(selectedText));
    range.deleteContents();
    range.insertNode(span);
    
    // Clear selection
    window.getSelection().removeAllRanges();
    lastSelection = null;
    
    // Hide menu
    document.getElementById('context-menu').style.display = 'none';
}

function removeHighlight() {
    if (!lastSelection) return;
    
    const range = lastSelection;
    const container = range.commonAncestorContainer;
    
    // Check if we're inside a highlight span
    let parent = container.nodeType === 3 ? container.parentNode : container;
    while (parent && parent.nodeName !== 'SPAN') {
        parent = parent.parentNode;
    }
    
    if (parent && (parent.classList.contains('hl-topic') || 
                   parent.classList.contains('hl-supporting') || 
                   parent.classList.contains('hl-example'))) {
        const text = parent.textContent;
        const textNode = document.createTextNode(text);
        parent.parentNode.replaceChild(textNode, parent);
    }
    
    window.getSelection().removeAllRanges();
    lastSelection = null;
    document.getElementById('context-menu').style.display = 'none';
}

function resetAllHighlights() {
    const essay = document.getElementById('sample-essay');
    const paragraphs = essay.querySelectorAll('.essay-paragraph');
    
    paragraphs.forEach(p => {
        // Get all highlight spans
        const highlights = p.querySelectorAll('.hl-topic, .hl-supporting, .hl-example');
        highlights.forEach(hl => {
            const text = hl.textContent;
            const textNode = document.createTextNode(text);
            hl.parentNode.replaceChild(textNode, hl);
        });
    });
    
    document.getElementById('context-menu').style.display = 'none';
}

document.addEventListener('DOMContentLoaded', function() {
    // Initialize split view
    divider = document.getElementById('split-divider');
    
    if (divider) {
        divider.addEventListener('mousedown', initResize);
    }
    
    window.addEventListener('resize', handleWindowResize);
    
    // Prevent default context menu on the left panel
    document.getElementById('left-panel').addEventListener('contextmenu', function(e) {
        e.preventDefault();
    });
});
</script>
</body>
</html>